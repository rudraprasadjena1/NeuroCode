<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Code Graph</title>
    <script src="https://unpkg.com/cytoscape/dist/cytoscape.min.js"></script>
    <style>
      html,
      body {
        width: 100%;
        height: 100%;
        margin: 0;
        background: #0f1117;
      }
      #cy {
        width: 100%;
        height: 100%;
      }
    </style>
  </head>
  <body>
    <div id="cy"></div>

    <script>
      fetch("/storage/graph.json?ts=" + Date.now())
        .then((res) => res.json())
        .then((data) => {
          cytoscape({
            container: document.getElementById("cy"),
            elements: data,
            style: [
              {
                selector: "node",
                style: {
                  "background-color": "#7aa2f7",
                  label: "data(id)",
                  "font-size": 6,
                  color: "#c0caf5",
                },
              },
              {
                selector: "edge",
                style: {
                  width: 1,
                  "line-color": "#414868",
                  "target-arrow-shape": "none",
                  "curve-style": "bezier",
                },
              },
            ],
            layout: {
              name: "cose",
              animate: true,
              gravity: 1,
              nodeRepulsion: 8000,
              idealEdgeLength: 100,
            },
          });
        });
    </script>
  </body>
</html>
